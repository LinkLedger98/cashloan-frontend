<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome | LinkLedger</title>
  <link rel="stylesheet" href="welcome.css" />
</head>
<body>

  <!-- Top Bar -->
  <div class="topbar">
    <div class="top-left">
      <div class="brandline">
        <span class="brand-name">LinkLedger</span>
        <span class="tagline">Where Trust Meets Transparency</span>
      </div>
    </div>

    <div class="top-right">
      <a class="toplink" href="index.html">Home</a>
      <a class="toplink" href="login.html" id="logoutBtn">Logout</a>
    </div>
  </div>

  <!-- Big Logo Hero -->
  <section class="logo-hero">
    <div class="logo-hero-inner">
      <div class="welcome-kicker">Welcome</div>
      <img class="hero-logo" src="assets/logo.png" alt="LinkLedger Logo" />
    </div>
  </section>

  <!-- Page Content -->
  <main class="wrap">

    <section class="card">
      <div class="small-title">Welcome</div>
      <h1>Responsible lending starts here.</h1>

      <p class="muted">
        LinkLedger is Botswana-first lending intelligence built to strengthen accountability,
        reduce repeat defaults, and protect legitimate lenders.
      </p>

      <div class="actions">
        <a class="btn btn-primary" href="dashboard.html">Proceed to Dashboard</a>
        <a class="btn btn-ghost" href="#about">About LinkLedger</a>

        <!-- ✅ Super Admin button (hidden unless admin) -->
        <a class="btn btn-ghost" id="adminBtn" href="#" style="display:none;">Super Admin</a>
      </div>

      <div class="chips">
        <div class="chip">
          <div class="chip-title">Secure</div>
          <div class="chip-text">Access controlled, audit-ready</div>
        </div>

        <div class="chip">
          <div class="chip-title">Trusted</div>
          <div class="chip-text">Built for Botswana’s market reality</div>
        </div>

        <div class="chip">
          <div class="chip-title">Practical</div>
          <div class="chip-text">Fast National ID verification</div>
        </div>
      </div>
    </section>

    <section class="card" id="about">
      <h2>Vision</h2>
      <p class="muted">
        To build Botswana's most trusted borrower verification and lending intelligence platform,
        strengthening responsible lending and financial inclusion.
      </p>
    </section>

    <section class="card">
      <h2>Mission</h2>
      <p class="muted">
        To provide lenders with secure, accurate, real-time borrower history using National ID-based verification —
        enabling safer decisions, reducing fraud, and restoring accountability in the lending market.
      </p>
    </section>

    <section class="card">
      <h2>Values</h2>
      <div class="values">
        <div class="value"><div class="value-title">Integrity</div><div class="muted">We protect borrower data and lender trust.</div></div>
        <div class="value"><div class="value-title">Transparency</div><div class="muted">Clear borrower history, no hidden risk.</div></div>
        <div class="value"><div class="value-title">Responsibility</div><div class="muted">We support ethical lending and market discipline.</div></div>
        <div class="value"><div class="value-title">Security</div><div class="muted">Strong controls designed for real-world risk.</div></div>
        <div class="value"><div class="value-title">National Impact</div><div class="muted">Built for Botswana, by Batswana.</div></div>
      </div>
    </section>

    <section class="card">
      <h2>Compliance &amp; Responsibility</h2>
      <p class="muted">
        LinkLedger operates with strict data minimisation principles and accountability controls.
        Borrower search results provide risk intelligence without exposing loan amounts.
      </p>
    </section>

    <footer class="footer">
      <div>© <span id="year"></span> LinkLedger • Botswana</div>
      <div class="footer-links">
        <a href="index.html">Home</a>
        <a href="dashboard.html">Dashboard</a>
      </div>
    </footer>

  </main>

  <!-- ✅ config needed for admin re-auth -->
  <script src="config.js?v=2"></script>

  <script>
    // Year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Logout clears everything
    document.getElementById("logoutBtn").addEventListener("click", function () {
      localStorage.removeItem("authToken");
      localStorage.removeItem("userEmail");
      localStorage.removeItem("userRole");
    });

    // Show Super Admin button only for admins (role OR admin emails)
    (function () {
      var email = (localStorage.getItem("userEmail") || "").toLowerCase();
      var role  = (localStorage.getItem("userRole") || "").toLowerCase();
      var isAdmin = (role === "admin" || email === "admin@linkledger.co.bw" || email === "admin2@linkledger.co.bw");

      var btn = document.getElementById("adminBtn");
      if (!btn) return;

      if (isAdmin) btn.style.display = "inline-block";

      btn.addEventListener("click", async function (e) {
        e.preventDefault();

        var pass = prompt("Enter Super Admin password:");
        if (!pass) return;

        var api = window.APP_CONFIG && window.APP_CONFIG.API_BASE_URL;
        if (!api) { alert("Config missing (config.js not loaded)"); return; }

        try {
          var res = await fetch(api + "/api/auth/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email: email, password: pass })
          });

          var data = await res.json().catch(() => ({}));
          if (!res.ok) { alert(data.message || "Admin login failed"); return; }

          var newRole = String(data.role || "").toLowerCase();
          localStorage.setItem("authToken", data.token);
          localStorage.setItem("userRole", newRole);

          if (newRole !== "admin") {
            alert("Not an admin account.");
            return;
          }

          window.location.href = "admin.html";
        } catch (err) {
          alert("Network error");
        }
      });
    })();
  </script>

</body>
</html>
